\hypertarget{go__to__point_8py}{}\doxysection{scripts/go\+\_\+to\+\_\+point.py File Reference}
\label{go__to__point_8py}\index{scripts/go\_to\_point.py@{scripts/go\_to\_point.py}}


This node drive the robot to the desired position received.  


\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{go__to__point_8py_ab67d5248fa9314fd19feebdb901e70ee}{go\+\_\+to\+\_\+point.\+clbk\+\_\+consts}} (msg\+\_\+consts)
\begin{DoxyCompactList}\small\item\em update constants callback \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}{go\+\_\+to\+\_\+point.\+clbk\+\_\+odom}} (msg)
\begin{DoxyCompactList}\small\item\em odometry callback \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}{go\+\_\+to\+\_\+point.\+change\+\_\+state}} (state)
\begin{DoxyCompactList}\small\item\em change the state of the robot. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}{go\+\_\+to\+\_\+point.\+normalize\+\_\+angle}} (angle)
\begin{DoxyCompactList}\small\item\em normalize the angle \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}{go\+\_\+to\+\_\+point.\+fix\+\_\+yaw}} (des\+\_\+pos)
\begin{DoxyCompactList}\small\item\em fix the actual yaw angle \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}{go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead}} (des\+\_\+pos)
\begin{DoxyCompactList}\small\item\em the robot goes straight ahead to the goal position. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}{go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw}} (des\+\_\+yaw)
\begin{DoxyCompactList}\small\item\em fix the final yaw angle. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}\label{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}} 
def \mbox{\hyperlink{go__to__point_8py_ac2587220a4ac9c845bc9c5b0b45d5835}{go\+\_\+to\+\_\+point.\+done}} ()
\begin{DoxyCompactList}\small\item\em Function used to stop the robot publishing 0 velocity on the topic cmd\+\_\+vel. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}{go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point}} (goal)
\item 
\mbox{\Hypertarget{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}\label{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}} 
def \mbox{\hyperlink{go__to__point_8py_ab92bd6db1ec323a4d795ed6cb40aebe1}{go\+\_\+to\+\_\+point.\+main}} ()
\begin{DoxyCompactList}\small\item\em Main function that create a publisher on the topic cmd\+\_\+vel, in order to publish new velocities, a subscriber on the topic odom, in order to read the actual position of the robot and start the action server. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}{go\+\_\+to\+\_\+point.\+position\+\_\+}} = Point()
\begin{DoxyCompactList}\small\item\em point used to store the actual position \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_ae444f19eb2019982432760ace036ce03}\label{go__to__point_8py_ae444f19eb2019982432760ace036ce03}} 
int \mbox{\hyperlink{go__to__point_8py_ae444f19eb2019982432760ace036ce03}{go\+\_\+to\+\_\+point.\+yaw\+\_\+}} = 0
\begin{DoxyCompactList}\small\item\em yaw angle set 0 as default \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_aa2d0ef255bcf5d5faf9ca2764730fb17}\label{go__to__point_8py_aa2d0ef255bcf5d5faf9ca2764730fb17}} 
int \mbox{\hyperlink{go__to__point_8py_aa2d0ef255bcf5d5faf9ca2764730fb17}{go\+\_\+to\+\_\+point.\+state\+\_\+}} = 0
\begin{DoxyCompactList}\small\item\em state set 0 as default (fix yaw angle) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}\label{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}} 
\mbox{\hyperlink{go__to__point_8py_a57b4090d0abcbcf0bfa2bcb9329d3036}{go\+\_\+to\+\_\+point.\+pub\+\_\+}} = None
\begin{DoxyCompactList}\small\item\em publisher used to pub to the topic cmd\+\_\+vel \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}\label{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}} 
int \mbox{\hyperlink{go__to__point_8py_a67f95834f0959feb3facd17bc7fa2b38}{go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+}} = math.\+pi / 9
\begin{DoxyCompactList}\small\item\em yaw precision allowed (+/-\/ 20 degree) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}\label{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}} 
int \mbox{\hyperlink{go__to__point_8py_af74ccf49164d0478ca8343e2031d5813}{go\+\_\+to\+\_\+point.\+yaw\+\_\+precision\+\_\+2\+\_\+}} = math.\+pi / 90
\begin{DoxyCompactList}\small\item\em yaw precision2 allowed (+/-\/ 2 degree) \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}\label{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}} 
float \mbox{\hyperlink{go__to__point_8py_a6a1e4eb20ebd4fce0fc56b0ebfd7a8d5}{go\+\_\+to\+\_\+point.\+dist\+\_\+precision\+\_\+}} = 0.\+1
\begin{DoxyCompactList}\small\item\em distance precision from goal allowed \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}\label{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}} 
float \mbox{\hyperlink{go__to__point_8py_a524106fc7667a0927951dfd89d52d6a7}{go\+\_\+to\+\_\+point.\+kp\+\_\+a}} = -\/3.\+0
\begin{DoxyCompactList}\small\item\em angular proportional constant \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}\label{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}} 
float \mbox{\hyperlink{go__to__point_8py_a7bc498652ca66932e704e738b50c297b}{go\+\_\+to\+\_\+point.\+kp\+\_\+d}} = 0.\+2
\begin{DoxyCompactList}\small\item\em linear proportional constant \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}\label{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}} 
float \mbox{\hyperlink{go__to__point_8py_acb4e14986fafe5cb73bb8ad0c178869d}{go\+\_\+to\+\_\+point.\+ub\+\_\+a}} = 0.\+6
\begin{DoxyCompactList}\small\item\em upper bound angular velocity \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_afecad4058844db05d8321199e25b4498}\label{go__to__point_8py_afecad4058844db05d8321199e25b4498}} 
float \mbox{\hyperlink{go__to__point_8py_afecad4058844db05d8321199e25b4498}{go\+\_\+to\+\_\+point.\+lb\+\_\+a}} = -\/0.\+5
\begin{DoxyCompactList}\small\item\em lower bound angular velocity \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}\label{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}} 
float \mbox{\hyperlink{go__to__point_8py_a16c473b9e717200c483d18e66b48152a}{go\+\_\+to\+\_\+point.\+ub\+\_\+d}} = 0.\+6
\begin{DoxyCompactList}\small\item\em upper bound linear velocity \end{DoxyCompactList}\item 
\mbox{\Hypertarget{go__to__point_8py_a2017a478ea0eb9380bed961db601f95d}\label{go__to__point_8py_a2017a478ea0eb9380bed961db601f95d}} 
\mbox{\hyperlink{go__to__point_8py_a2017a478ea0eb9380bed961db601f95d}{go\+\_\+to\+\_\+point.\+action\+\_\+server}} = None
\begin{DoxyCompactList}\small\item\em action server used to manage go\+\_\+to\+\_\+point \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This node drive the robot to the desired position received. 

\begin{DoxyAuthor}{Author}
Enrico Fiasche\textquotesingle{} S4482512 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
28/07/2021
\end{DoxyDate}
Subscribes to\+: ~\newline
 /odom /consts

Publishes to\+: ~\newline
 /cmd\+\_\+vel

Action server\+: ~\newline
 /go\+\_\+to\+\_\+point

This node is an action server used to reach a given goal. This node use a publisher, which publishes the velocity of the robot through the cmd\+\_\+vel topic, and a subscriber, which checks the position of the robot through the odom topic. If a new goal is set, this node fix the yaw angle in order to be aligned with the goal, then the robot can go straight towards the target point and finally, when the robot is near the desired position, it can fix the final yaw angle in order to have the same orientation of the given goal. During these operations, ~the node checks continuously if the goal is canceled in order to stop the robot. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}\label{go__to__point_8py_a31ee48e5cae36821049b572a96b7c8be}} 
\index{go\_to\_point.py@{go\_to\_point.py}!change\_state@{change\_state}}
\index{change\_state@{change\_state}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{change\_state()}{change\_state()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+change\+\_\+state (\begin{DoxyParamCaption}\item[{}]{state }\end{DoxyParamCaption})}



change the state of the robot. 


\begin{DoxyParams}{Parameters}
{\em state} & new machine state\\
\hline
\end{DoxyParams}
Function used to change the state of the go\+\_\+to\+\_\+point service. \mbox{\Hypertarget{go__to__point_8py_ab67d5248fa9314fd19feebdb901e70ee}\label{go__to__point_8py_ab67d5248fa9314fd19feebdb901e70ee}} 
\index{go\_to\_point.py@{go\_to\_point.py}!clbk\_consts@{clbk\_consts}}
\index{clbk\_consts@{clbk\_consts}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{clbk\_consts()}{clbk\_consts()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+clbk\+\_\+consts (\begin{DoxyParamCaption}\item[{}]{msg\+\_\+consts }\end{DoxyParamCaption})}



update constants callback 


\begin{DoxyParams}{Parameters}
{\em msg\+\_\+consts} & contains the new linear and angular constants\\
\hline
\end{DoxyParams}
Callback function used to update the linear and angular constants used during the motion. \mbox{\Hypertarget{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}\label{go__to__point_8py_a36304a9f313b0579f7fc69fa01695524}} 
\index{go\_to\_point.py@{go\_to\_point.py}!clbk\_odom@{clbk\_odom}}
\index{clbk\_odom@{clbk\_odom}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{clbk\_odom()}{clbk\_odom()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+clbk\+\_\+odom (\begin{DoxyParamCaption}\item[{}]{msg }\end{DoxyParamCaption})}



odometry callback 


\begin{DoxyParams}{Parameters}
{\em msg} & contains the position and orientation of the robot\\
\hline
\end{DoxyParams}
Callback function used to check the actual position of the robot through the odom message received. \mbox{\Hypertarget{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}\label{go__to__point_8py_a4a406386ca62830c19c93949e923f7bd}} 
\index{go\_to\_point.py@{go\_to\_point.py}!fix\_final\_yaw@{fix\_final\_yaw}}
\index{fix\_final\_yaw@{fix\_final\_yaw}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{fix\_final\_yaw()}{fix\_final\_yaw()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+fix\+\_\+final\+\_\+yaw (\begin{DoxyParamCaption}\item[{}]{des\+\_\+yaw }\end{DoxyParamCaption})}



fix the final yaw angle. 


\begin{DoxyParams}{Parameters}
{\em des\+\_\+yaw} & desired yaw final angle to be reached\\
\hline
\end{DoxyParams}
Function used to fix the final yaw angle of the robot in order to reach the final goal position and orientation. If the angle is aligned with the des\+\_\+yaw it changes the state in \char`\"{}\+Target reached\char`\"{}. \mbox{\Hypertarget{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}\label{go__to__point_8py_a9c3011a3065fcbefcc1c5ad8c9979669}} 
\index{go\_to\_point.py@{go\_to\_point.py}!fix\_yaw@{fix\_yaw}}
\index{fix\_yaw@{fix\_yaw}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{fix\_yaw()}{fix\_yaw()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+fix\+\_\+yaw (\begin{DoxyParamCaption}\item[{}]{des\+\_\+pos }\end{DoxyParamCaption})}



fix the actual yaw angle 


\begin{DoxyParams}{Parameters}
{\em des\+\_\+pos} & actual goal position used to fix the yaw angle of the robot.\\
\hline
\end{DoxyParams}
Function used to fix the actual yaw angle in order to allow the robot to go straight to the goal. If the yaw angle is correct (checking also the precision) the robot changes the state in \char`\"{}go\+\_\+straight\+\_\+ahead\char`\"{}. \mbox{\Hypertarget{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}\label{go__to__point_8py_ac8579665c0fbf665f734476554fac37d}} 
\index{go\_to\_point.py@{go\_to\_point.py}!go\_straight\_ahead@{go\_straight\_ahead}}
\index{go\_straight\_ahead@{go\_straight\_ahead}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{go\_straight\_ahead()}{go\_straight\_ahead()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+go\+\_\+straight\+\_\+ahead (\begin{DoxyParamCaption}\item[{}]{des\+\_\+pos }\end{DoxyParamCaption})}



the robot goes straight ahead to the goal position. 


\begin{DoxyParams}{Parameters}
{\em des\+\_\+pos} & goal position used to allow the robot to reach the desired position\\
\hline
\end{DoxyParams}
Function used to go straight ahead to the goal position. If the robot reaches the goal position (checking also the precision) changes the state in \char`\"{}fix the final yaw angle\char`\"{}. ~\newline
 \mbox{\Hypertarget{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}\label{go__to__point_8py_a2203d17b7e563bee20ed4c988548df45}} 
\index{go\_to\_point.py@{go\_to\_point.py}!go\_to\_point@{go\_to\_point}}
\index{go\_to\_point@{go\_to\_point}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{go\_to\_point()}{go\_to\_point()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+go\+\_\+to\+\_\+point (\begin{DoxyParamCaption}\item[{}]{goal }\end{DoxyParamCaption})}


\begin{DoxyParams}{Parameters}
{\em goal} & goal position and orientation received.\\
\hline
\end{DoxyParams}
Function used by the action server to manage the behaviour of the robot. The function, for each cycle, checks if the goal was canceled and checks the actual state in order to perform the correct function. \mbox{\Hypertarget{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}\label{go__to__point_8py_ac688bb56fa84763ea2edefc30cae032a}} 
\index{go\_to\_point.py@{go\_to\_point.py}!normalize\_angle@{normalize\_angle}}
\index{normalize\_angle@{normalize\_angle}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{normalize\_angle()}{normalize\_angle()}}
{\footnotesize\ttfamily def go\+\_\+to\+\_\+point.\+normalize\+\_\+angle (\begin{DoxyParamCaption}\item[{}]{angle }\end{DoxyParamCaption})}



normalize the angle 


\begin{DoxyParams}{Parameters}
{\em angle} & angle to normalize\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\+: angle\+: angle, passed as parameter, normalized
\end{DoxyReturn}
Function used to normalize the angle 

\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}\label{go__to__point_8py_a91dbaab25e6080f6b5dbf82cac6ce75c}} 
\index{go\_to\_point.py@{go\_to\_point.py}!position\_@{position\_}}
\index{position\_@{position\_}!go\_to\_point.py@{go\_to\_point.py}}
\doxysubsubsection{\texorpdfstring{position\_}{position\_}}
{\footnotesize\ttfamily int go\+\_\+to\+\_\+point.\+position\+\_\+ = Point()}



point used to store the actual position 

position set 0 as default 